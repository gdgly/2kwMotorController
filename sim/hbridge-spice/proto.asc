Version 4
SHEET 1 1628 880
WIRE -400 -512 -480 -512
WIRE 352 -496 288 -496
WIRE 384 -496 352 -496
WIRE 672 -496 608 -496
WIRE 688 -496 672 -496
WIRE 1184 -496 1104 -496
WIRE 1200 -496 1184 -496
WIRE -224 -480 -288 -480
WIRE -96 -480 -224 -480
WIRE -96 -464 -96 -480
WIRE 288 -464 288 -496
WIRE 608 -464 608 -496
WIRE 1104 -464 1104 -496
WIRE -400 -416 -480 -416
WIRE -96 -368 -96 -384
WIRE 288 -368 288 -384
WIRE 608 -368 608 -384
WIRE 1104 -368 1104 -384
WIRE -416 -272 -480 -272
WIRE -272 -272 -336 -272
WIRE 192 -272 -272 -272
WIRE -480 -240 -480 -272
WIRE -272 -224 -272 -272
WIRE -480 -128 -480 -160
WIRE -272 -128 -272 -160
WIRE 192 -128 192 -272
WIRE 288 -128 192 -128
WIRE 688 -128 288 -128
WIRE 784 -128 688 -128
WIRE 192 -112 192 -128
WIRE 288 -112 288 -128
WIRE 688 -112 688 -128
WIRE 784 -112 784 -128
WIRE 16 -32 -48 -32
WIRE 144 -32 96 -32
WIRE 880 -32 832 -32
WIRE 1024 -32 960 -32
WIRE -272 0 -496 0
WIRE -208 0 -272 0
WIRE -80 0 -144 0
WIRE -48 0 -48 -32
WIRE 16 0 -48 0
WIRE 240 0 240 -32
WIRE 240 0 96 0
WIRE 736 0 736 -32
WIRE 880 0 736 0
WIRE 1024 0 1024 -32
WIRE 1024 0 960 0
WIRE 1120 0 1056 0
WIRE 1248 0 1184 0
WIRE 1312 0 1248 0
WIRE 1328 0 1312 0
WIRE 192 16 192 -16
WIRE 288 16 288 -16
WIRE 288 16 192 16
WIRE 688 16 688 -16
WIRE 784 16 784 -16
WIRE 784 16 688 16
WIRE 192 48 192 16
WIRE 784 48 784 16
WIRE -496 80 -496 0
WIRE -272 96 -272 0
WIRE -272 96 -288 96
WIRE -240 96 -272 96
WIRE -48 96 -48 0
WIRE -48 96 -112 96
WIRE 1024 96 1024 0
WIRE 1088 96 1024 96
WIRE 1248 96 1248 0
WIRE 1248 96 1216 96
WIRE 1264 96 1248 96
WIRE -352 128 -352 96
WIRE -240 128 -352 128
WIRE -80 128 -80 0
WIRE -80 128 -112 128
WIRE -48 128 -80 128
WIRE 32 128 16 128
WIRE 960 128 944 128
WIRE 1056 128 1056 0
WIRE 1056 128 1024 128
WIRE 1088 128 1056 128
WIRE 1328 128 1328 96
WIRE 1328 128 1216 128
WIRE -352 160 -352 128
WIRE -288 160 -304 160
WIRE -240 160 -288 160
WIRE 32 160 32 128
WIRE 32 160 -112 160
WIRE 192 160 192 128
WIRE 192 160 32 160
WIRE 288 160 192 160
WIRE 480 160 368 160
WIRE 784 160 784 128
WIRE 784 160 592 160
WIRE 944 160 944 128
WIRE 944 160 784 160
WIRE 1088 160 944 160
WIRE 1264 160 1216 160
WIRE 1280 160 1264 160
WIRE 1328 160 1328 128
WIRE -496 192 -496 160
WIRE -288 192 -304 192
WIRE -240 192 -288 192
WIRE 192 192 192 160
WIRE 288 192 192 192
WIRE 784 192 784 160
WIRE 784 192 688 192
WIRE 1264 192 1216 192
WIRE 1280 192 1264 192
WIRE 192 208 192 192
WIRE 288 208 288 192
WIRE 688 208 688 192
WIRE 784 208 784 192
WIRE -240 224 -304 224
WIRE -48 224 -112 224
WIRE 1088 224 1024 224
WIRE 1280 224 1216 224
WIRE -304 240 -304 224
WIRE 1280 240 1280 224
WIRE -48 288 -48 224
WIRE 16 288 -48 288
WIRE 144 288 96 288
WIRE 880 288 832 288
WIRE 1024 288 1024 224
WIRE 1024 288 960 288
WIRE -48 320 -48 288
WIRE 16 320 -48 320
WIRE 240 320 240 288
WIRE 240 320 96 320
WIRE 736 320 736 288
WIRE 880 320 736 320
WIRE 1024 320 1024 288
WIRE 1024 320 960 320
WIRE -304 336 -304 320
WIRE 192 336 192 304
WIRE 288 336 288 304
WIRE 288 336 192 336
WIRE 688 336 688 304
WIRE 784 336 784 304
WIRE 784 336 688 336
WIRE 1280 336 1280 320
WIRE 192 368 192 336
WIRE 784 368 784 336
WIRE 192 480 192 448
WIRE 512 480 192 480
WIRE 784 480 784 448
WIRE 784 480 512 480
WIRE 512 512 512 480
FLAG -272 -128 0
FLAG -480 -128 0
FLAG -304 336 0
FLAG -352 160 0
FLAG -288 160 EN
FLAG -288 192 IN_1
FLAG 1280 336 0
FLAG 1328 160 0
FLAG 1264 160 EN
FLAG 1264 192 IN_2
FLAG 608 -368 0
FLAG 1104 -368 0
FLAG 288 -368 0
FLAG 672 -496 IN_1
FLAG 1184 -496 IN_2
FLAG 352 -496 EN
FLAG 512 512 0
FLAG -496 192 0
FLAG -496 0 VDD
FLAG 1312 0 VDD
FLAG 592 160 M-
FLAG -480 -512 M+
FLAG -480 -416 M-
FLAG -96 -368 0
FLAG -224 -480 omega
FLAG 480 160 M+
SYMBOL nmos 144 -112 R0
WINDOW 0 3 -6 Left 2
WINDOW 3 66 -70 Left 2
SYMATTR InstName M1
SYMATTR Value IPP037N08N3
SYMBOL ind 176 32 R0
SYMATTR InstName L_parasitic_1
SYMATTR Value 10n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 176 352 R0
SYMATTR InstName L_parasitic_2
SYMATTR Value 10n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 768 352 R0
SYMATTR InstName L_parasitic_3
SYMATTR Value 10n
SYMATTR SpiceLine Rser=1m
SYMBOL ind 768 32 R0
WINDOW 0 -144 22 Left 2
SYMATTR InstName L_parasitic_4
SYMATTR Value 10n
SYMATTR SpiceLine Rser=1m
SYMBOL ind -432 -256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L6
SYMATTR Value 1µ
SYMBOL cap -288 -224 R0
SYMATTR InstName C1
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=100m
SYMBOL voltage -480 -256 R0
WINDOW 0 39 57 Left 2
WINDOW 3 0 88 Top 2
WINDOW 123 0 0 Left 2
WINDOW 39 34 102 Left 2
SYMATTR InstName U1
SYMATTR Value 48
SYMATTR SpiceLine Rser=1m
SYMBOL res 112 -48 R90
WINDOW 0 -2 76 VBottom 2
WINDOW 3 -31 38 VTop 2
SYMATTR InstName R2
SYMATTR Value 5.1
SYMBOL cap 16 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -28 -30 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.22µ
SYMBOL diode -208 16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res -288 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 27k
SYMBOL cap -288 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 0 88 Top 2
SYMATTR InstName U3
SYMATTR Value 0.1µ
SYMBOL cap 960 112 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -28 -30 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.22µ
SYMBOL diode 1184 16 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 1264 336 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 27k
SYMBOL cap 1264 80 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 -26 80 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL voltage 608 -480 R0
WINDOW 3 -217 152 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 0 10n 10n 10e-6 50e-6 150)
SYMATTR InstName V1
SYMBOL voltage 288 -480 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL voltage -496 64 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=100m
SYMATTR InstName VDD
SYMATTR Value 10
SYMBOL voltage 1104 -480 R0
WINDOW 3 -234 151 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 0.0075 10n 10n 10e-6 50e-6 50)
SYMATTR InstName V2
SYMBOL DC_motor_model -352 -464 R0
SYMATTR InstName X1
SYMBOL current -96 -464 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I_load_torque_external
SYMATTR Value 1
SYMBOL nmos 240 -112 R0
WINDOW 0 4 -5 Left 2
WINDOW 3 -32 -42 Left 2
SYMATTR InstName M2
SYMATTR Value IPP037N08N3
SYMBOL res 112 -16 R90
WINDOW 0 56 83 VBottom 2
WINDOW 3 30 29 VTop 2
SYMATTR InstName R1
SYMATTR Value 5.1
SYMBOL nmos 144 208 R0
WINDOW 0 5 -7 Left 2
WINDOW 3 153 135 Left 2
SYMATTR InstName M3
SYMATTR Value IPP037N08N3
SYMBOL res 112 272 R90
WINDOW 0 -2 76 VBottom 2
WINDOW 3 -31 32 VTop 2
SYMATTR InstName R4
SYMATTR Value 5.1
SYMBOL nmos 240 208 R0
WINDOW 0 8 -3 Left 2
WINDOW 3 57 106 Left 2
SYMATTR InstName M4
SYMATTR Value IPP037N08N3
SYMBOL res 112 304 R90
WINDOW 0 64 82 VBottom 2
WINDOW 3 36 35 VTop 2
SYMATTR InstName R5
SYMATTR Value 5.1
SYMBOL nmos 832 208 M0
WINDOW 0 5 -7 Left 2
WINDOW 3 159 137 Left 2
SYMATTR InstName M5
SYMATTR Value IPP037N08N3
SYMBOL res 864 272 M90
WINDOW 0 -2 76 VBottom 2
WINDOW 3 -31 32 VTop 2
SYMATTR InstName R3
SYMATTR Value 5.1
SYMBOL nmos 736 208 M0
WINDOW 0 8 -3 Left 2
WINDOW 3 61 108 Left 2
SYMATTR InstName M6
SYMATTR Value IPP037N08N3
SYMBOL res 864 304 M90
WINDOW 0 64 82 VBottom 2
WINDOW 3 36 35 VTop 2
SYMATTR InstName R7
SYMATTR Value 5.1
SYMBOL nmos 832 -112 M0
WINDOW 0 3 -6 Left 2
WINDOW 3 138 -62 Left 2
SYMATTR InstName M7
SYMATTR Value IPP037N08N3
SYMBOL res 864 -48 M90
WINDOW 0 -2 76 VBottom 2
WINDOW 3 -31 38 VTop 2
SYMATTR InstName R8
SYMATTR Value 5.1
SYMBOL nmos 736 -112 M0
WINDOW 0 4 -5 Left 2
WINDOW 3 44 -37 Left 2
SYMATTR InstName M8
SYMATTR Value IPP037N08N3
SYMBOL res 864 -16 M90
WINDOW 0 56 83 VBottom 2
WINDOW 3 30 29 VTop 2
SYMATTR InstName R10
SYMATTR Value 5.1
SYMBOL res 272 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 59 124 VBottom 2
SYMATTR InstName Rsense
SYMATTR Value 1n
SYMBOL LM5106_TRANS -176 160 R0
SYMATTR InstName U2
SYMBOL LM5106_TRANS 1152 160 M0
SYMATTR InstName U4
TEXT -480 496 Left 2 !.tran 0.005
TEXT -472 456 Left 2 !.lib LM5106_TRANS.lib
